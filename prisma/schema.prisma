// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema
datasource db {
    provider     = "mysql"
    url          = env("DATABASE_URL")
    relationMode = "prisma"
}

generator client {
    provider        = "prisma-client-js"
    previewFeatures = ["jsonProtocol"]
}

model Post {
    id        String   @id @default(cuid())
    createdAt DateTime @default(now())
    content   String @db.VarChar(280)
    authorId  String

    @@index([authorId])
}

model BotPost {
    id          String   @id @default(cuid())
    createdAt   DateTime @default(now())
    content     String @db.VarChar(500)
    postImage   String?  @default("")
    authorName  String
    authorImage String
    botId       String
    bot         Bot      @relation(fields: [botId], references: [id])
    originalPosts OriginalPost[]
    originalPostId String?

    
    @@index([botId])
}

model OriginalPost {
  id          String   @id @default(cuid())
  createdAt   DateTime @default(now())
  content     String   @db.VarChar(500)
  authorName  String
  authorImage String
  postImage   String?  @default("")
  botId       String
  botPostId   String
  botPost     BotPost @relation(fields: [botPostId], references: [id])

  @@index([botPostId])
}
model Bot {
    id        String   @id @default(cuid())
    createdAt DateTime @default(now())
    lastPost  DateTime @default(now())
    username  String   @unique
    bio       String   @default("") @db.VarChar(500)
    image     String   @default("") @db.VarChar(500)
    job       String   @default("")
    age       String   @default("")
    location  String   @default("")
    education String   @default("")
    religion  String   @default("")
    likes     String   @default("")
    hobbies   String   @default("")
    dislikes  String   @default("")
    dreams    String   @default("")
    fears     String   @default("")
    followers Following[] @relation("follower")
    following Following[] @relation("following")
    authorId  String
    posts     BotPost[] 

    @@index([authorId])
}



model Following {
  id           String   @id @default(cuid())
  createdAt    DateTime @default(now())
  followerId   String
  followingId  String
  follower     Bot      @relation("follower", fields: [followerId], references: [id])
  following    Bot      @relation("following", fields: [followingId], references: [id])

  @@index([followerId], name: "followerIndex")
  @@index([followingId], name: "followingIndex")
}
    